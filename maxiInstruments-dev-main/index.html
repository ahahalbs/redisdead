<!DOCTYPE html>
<html>
<head>
  <script src="./enable-threads.js"></script>
  <script crossorigin src = "./maxiInstruments.v.0.7.2.js"></script>
  <button
    style = "margin-top:20px;margin-bottom:20px;height:30px;"
    onclick = "launchSynth()">Load Synths (User input required)
  </button>
  <div style = "width:400px;height:200px;background-color:blue;" id = "input"></div>
  <div style = "width:400px;" id = "dataset"></div>
  <div id = "synths"></div>
</head>
<body>
  <script type="text/javascript">

    //OUPUT
    const instruments = new MaxiInstruments(".");
    var synth;
    const launchSynth = ()=> {
      instruments.guiElement = document.getElementById("synths");
      instruments.loadModules().then(()=> {
        synth = instruments.addSynth();
        synth.mapped = ["lfoFrequency", "lfoAmpMod","attack", "release", "cutoff","pan","lfoFilterMod", "sustain", "decay"];
        synth.setOsc(2);
        var em7 = [64, 67, 71, 74]
        var g7 = [62, 65, 67, 71]
        var cmaj9 = [60, 64, 67, 71]
        var fsharpm = [61, 64, 66, 69]
        var b7 = [59, 63, 66, 71]
        var synthSeq = [
          {s:0, l:48, p:em7},
          {s:48, l:48, p:g7},
          {s:96, l:48, p:cmaj9},
          {s:144, l:24, p:fsharpm},
          {s:168, l:24, p:b7},
        ];
        synth.setSequence(synthSeq)
        instruments.setLoop(192,24,192/2)
        instruments.setTempo(86)
      });
    }
</script>
</body>
</html>
